{% load staticfiles %}
<!DOCTYPE html>
<html lang="UTF-8">
  <head>
    <title>ChamFION &mdash; 피파온라인분석사이트</title>
    <meta charset="utf-8">
    <!--  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> -->
    <!-- <link href="https://fonts.googleapis.com/css?family=Muli:300,400,700,900" rel="stylesheet"> -->
	  <link rel="stylesheet" href='{% static "fonts/icomoon/style.css" %}'>
    <link rel="stylesheet" href='{% static "css/bootstrap.min.css" %}'>
    <link rel="stylesheet" href='{% static "css/jquery-ui.css" %}'>
    <link rel="stylesheet" href='{% static "css/owl.carousel.min.css" %}'>
    <link rel="stylesheet" href='{% static "css/owl.theme.default.min.css" %}'>
    <link rel="stylesheet" href='{% static "css/owl.theme.default.min.css" %}'>
    <link rel="stylesheet" href='{% static "css/jquery.fancybox.min.css" %}'>
    <link rel="stylesheet" href='{% static "css/bootstrap-datepicker.css" %}'>
    <link rel="stylesheet" href='{% static "fonts/flaticon/font/flaticon.css" %}'>
    <link rel="stylesheet" href='{% static "css/aos.css" %}'>
    <link rel="stylesheet" href='{% static "css/style.css" %}'>
    <link rel="stylesheet" href='{% static "css/formation.css" %}'>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
       <script>
             // using jQuery csrftoken
              function getCookie(name) {
                var cookieValue = null;
                if (document.cookie && document.cookie != '') {
                  var cookies = document.cookie.split(';');
                  for (var i = 0; i < cookies.length; i++) {
                    var cookie = jQuery.trim(cookies[i]);
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) == (name + '=')) {
                      cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                      break;
                    }
                  }
                }
                return cookieValue;
              }
              function csrfSafeMethod(method) {
                // these HTTP methods do not require CSRF protection
                return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
              }
              $(document).ready(function() {
                var csrftoken = getCookie('csrftoken');
                $.ajaxSetup({
                  beforeSend: function(xhr, settings) {
                    if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                      xhr.setRequestHeader("X-CSRFToken", csrftoken);
                    }
                  }
                });
              });
        </script>
    <style>
      table {
        border-collapse: collapse;
        width: 100%;
      }

      th, td {
        text-align: left;
        padding: 8px;
      }

      tr:nth-child(even){background-color: #f2f2f2}
      tr:hover {background-color:#f5f5f5;}
      th {
        background-color: #4CAF50;  
        color: white;
      }
      
      #tabcontent {
        display: block;
        background-color: green;
        padding: 6px 12px;
        color: #fff;
      }
    </style>
    
  </head>
  <body data-spy="scroll" data-target=".site-navbar-target" data-offset="300">
  
  <div class="site-wrap">

    <div class="site-mobile-menu site-navbar-target">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close mt-3">
          <span class="icon-close2 js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div>
   
    
    <header class="site-navbar py-4 js-sticky-header site-navbar-target" role="banner">
      
      <div class="container-fluid">
        <div class="d-flex align-items-center">
          <div class="site-logo mr-auto w-25"><a href="../">ChamFION</a></div>

          <div class="mx-auto text-center">
            <nav class="site-navigation position-relative text-right" role="navigation">
              <ul class="site-menu main-menu js-clone-nav mx-auto d-none d-lg-block  m-0 p-0">
                <li><a href="#home-section" class="nav-link">Home</a></li>
                <li><a href="../search" class="nav-link">Squad Maker</a></li>
                <li><a href="../topplayer" class="nav-link">Top Player</a></li>
                <li><a href="../analysis" class="nav-link">Analysis</a></li>
              </ul>
            </nav>
          </div>

          <div class="ml-auto w-25">
            <nav class="site-navigation position-relative text-right" role="navigation">
              <ul class="site-menu main-menu site-menu-dark js-clone-nav mr-auto d-none d-lg-block m-0 p-0">
                <li class="cta"><a href="#contact-section" class="nav-link"><span>Contact Us</span></a></li>
              </ul>
            </nav>
            <a href="#" class="d-inline-block d-lg-none site-menu-toggle js-menu-toggle text-black float-right"><span class="icon-menu h3"></span></a>
          </div>
        </div>
      </div>
      
    </header>

    <div class="intro-section single-cover" id="home-section" style="height:0vh ; min-height: 80px;" >
      <div class="slide-1 "  data-stellar-background-ratio="0.5">
       
      </div>
    </div>
    
    <div class="site-section">
      <div class="container" style = "max-width: 1000px; margin-left:150px;" >
        <div class="row">
          <div class="col-lg-12">
            <div> 

              <h3 class="text-black">스쿼드 메이커 </h3> 
                <ul class="tab">
                  <li data-tab="tab1" class='tabmenu' id="default"><a href="#">TabExample1</a></li>
                  <li data-tab="tab2" class='tabmenu'><a href="#">TabExample2</a></li>
                  <li data-tab="tab3" class='tabmenu'><a href="#">TabExample3</a></li>
                </ul>
                <div id="tabcontent"></div>

            </div>
              
              
          </div>
            
        </div> <!--  row end -->
  
      </div>
    </div>  
  </div>


        <script>
          $(function() {
            // tab operation
            $('.tabmenu').click(function() {
              var activeTab = $(this).attr('data-tab');
              $('li').css('background-color', 'white');
              $(this).css('background-color', 'green');
              $.ajax({
                type : 'GET',                 //get방식으로 통신
                url : activeTab + ".html",    //탭의 data-tab속성의 값으로 된 html파일로 통신
                dataType : "html",            //html형식으로 값 읽기
                error : function() {          //통신 실패시
                  alert('통신실패!');
                },
                success : function(data) {    //통신 성공시 탭 내용담는 div를 읽어들인 값으로 채운다.
                  $('#tabcontent').html(data);
                }
              });
            });
            $('#default').click();          
          });

            $('#selectbox').change( function() {
                $.ajax({
                    url:'/myapp/squadform/',
                    dataType:'json',
                    type:'POST',
                    data:{'msg':$('#selectbox').val()},
                    success:function(result){
                        $('#squadformation').html(result['msg']);
                    }
                });
            })

            function recoplayer(i){
             $(function () {
              //동적으로 원격에 있는 JSON 파일(결과값)을 로드
              $.ajax({
                url: "/myapp/recommend/",
                dataType: "json",
                success: function (data) {
                  //받아온 JSON을 테이블에 출력
                  $('#tablList').html("");
                  $('#tablList').append("<th>IMG</th><th>Season</th><th> Name </th><th>Pay</th><th>OVR</th>");

                  $.each(data, function (index, entry) {
                    $('#tablList').append("<tr onclick=\"takeplayer(\'"+entry["Season"]+"\',\'"+i+"\',\'"+entry["Pnum"]+"\',\'"+entry["Mark"]+"\',\'"+entry["Name"]+"\')\"><td>" + "<img src=\"http://fo4.dn.nexoncdn.co.kr/live/externalAssets/common/players/"+entry["Pnum"]+".png?rd=201910080430\">" + "</td><td>" + "<img src=\"http://s.nx.com/s2/game/fo4/obt/externalAssets/season/"+entry["Season"]+".png\">" + "</td><td>" + entry["Name"] + "</td><td>" + entry["Pay"] + "</td><td>" + entry["OVR"] + "</td></tr>");
                    
                  });
                },
                error: function () { alert("에러발생"); }
              });
            });
            }

            function takeplayer(season,i,Pnum,Mark,Name){
              alert(season+","+i+","+Pnum)
              
              $(function () {
              //동적으로 원격에 있는 JSON 파일(결과값)을 로드
              $.ajax({
                url: "/myapp/takeplayer/",
                dataType: "json",
                success: function (data) {
                  //받아온 JSON을 테이블에 출력
                  $('#formationPlayer'+i).html("");
                  $('#formationPlayer'+i).append("<img src=\"http://s.nx.com/s2/game/fo4/obt/externalAssets/card/"+season+".png\" width=\"120\" height=\"120\" onclick=\"searchplayer(i)\">");
                  $('#formationPlayer'+i).append("<img style=\"position: absolute; top: 15%;left:40%;\" src=\"http://fo4.dn.nexoncdn.co.kr/live/externalAssets/common/players/"+Pnum+".png?rd=201910080430\" width=\"72\" height=\"72\" onclick=\"searchplayer(i)\">");
                  $('#formationPlayer'+i).append("<img style=\"position: absolute; top: 57%;left:10%;\" src=\"http://s.nx.com/s2/game/fo4/obt/externalAssets/season/"+Mark+"_big.png\" width=\"18px\" height=\"18px\" onclick=\"searchplayer(i)\">");
                },
                error: function () { alert("에러발생"); }
              });
            });

            }

            function takeplayer2(name,k){
            var jsonLocation = '/static/images/background.json';

            $.getJSON(jsonLocation, function(data){

              $.each(data, function(I, item){

              console.log(item.seasonId);

              });

            });

            }

            

        </script>




	<!-- .site-wrap -->

  <script src='{% static "js/jquery-3.3.1.min.js" %}'></script>
  <script src='{% static "js/jquery-migrate-3.0.1.min.js" %}'></script>
  <script src='{% static "js/jquery-ui.js" %}'></script>
  <script src='{% static "js/popper.min.js" %}'></script>
  <script src='{% static "js/bootstrap.min.js" %}'></script>
  <script src='{% static "js/owl.carousel.min.js" %}'></script>
  <script src='{% static "js/jquery.stellar.min.js" %}'></script>
  <script src='{% static "js/jquery.countdown.min.js" %}'></script>
  <script src='{% static "js/bootstrap-datepicker.min.js" %}'></script>
  <script src='{% static "js/jquery.easing.1.3.js" %}'></script>
  <script src='{% static "js/aos.js" %}'></script>
  <script src='{% static "js/jquery.fancybox.min.js" %}'></script>
  <script src='{% static "js/jquery.sticky.js" %}'></script>

  
  <script src='{% static "js/main.js" %}'></script>
    
  </body>
</html>