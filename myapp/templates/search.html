{% load staticfiles %}
<!DOCTYPE html>
<html lang="UTF-8">
  <head>
    <title>ChamFION &mdash; 피파온라인분석사이트</title>
    <meta charset="utf-8">
    <!--  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> -->
    <!-- <link href="https://fonts.googleapis.com/css?family=Muli:300,400,700,900" rel="stylesheet"> -->
	  <link rel="stylesheet" href='{% static "fonts/icomoon/style.css" %}'>
    <link rel="stylesheet" href='{% static "css/bootstrap.min.css" %}'>
    <link rel="stylesheet" href='{% static "css/jquery-ui.css" %}'>
    <link rel="stylesheet" href='{% static "css/owl.carousel.min.css" %}'>
    <link rel="stylesheet" href='{% static "css/owl.theme.default.min.css" %}'>
    <link rel="stylesheet" href='{% static "css/owl.theme.default.min.css" %}'>
    <link rel="stylesheet" href='{% static "css/jquery.fancybox.min.css" %}'>
    <link rel="stylesheet" href='{% static "css/bootstrap-datepicker.css" %}'>
    <link rel="stylesheet" href='{% static "fonts/flaticon/font/flaticon.css" %}'>
    <link rel="stylesheet" href='{% static "css/aos.css" %}'>
    <link rel="stylesheet" href='{% static "css/style.css" %}'>
    <link rel="stylesheet" href='{% static "css/formation.css" %}'>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
       <script>
             // using jQuery csrftoken
              function getCookie(name) {
                var cookieValue = null;
                if (document.cookie && document.cookie != '') {
                  var cookies = document.cookie.split(';');
                  for (var i = 0; i < cookies.length; i++) {
                    var cookie = jQuery.trim(cookies[i]);
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) == (name + '=')) {
                      cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                      break;
                    }
                  }
                }
                return cookieValue;
              }
              function csrfSafeMethod(method) {
                // these HTTP methods do not require CSRF protection
                return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
              }
              $(document).ready(function() {
                var csrftoken = getCookie('csrftoken');
                $.ajaxSetup({
                  beforeSend: function(xhr, settings) {
                    if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                      xhr.setRequestHeader("X-CSRFToken", csrftoken);
                    }
                  }
                });
              });
        </script>
    <style>
      table {
        border-collapse: collapse;
        width: 100%;
      }

      th, td {
        text-align: left;
        padding: 8px;
      }

      tr:nth-child(even){background-color: #f2f2f2}
      tr:hover {background-color:#f5f5f5;}
      th {
        background-color: #4CAF50;  
        color: white;
      }
    </style>
    
  </head>
  <body data-spy="scroll" data-target=".site-navbar-target" data-offset="300">
  
  <div class="site-wrap">

    <div class="site-mobile-menu site-navbar-target">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close mt-3">
          <span class="icon-close2 js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div>
   
    
    <header class="site-navbar py-4 js-sticky-header site-navbar-target" role="banner">
      
      <div class="container-fluid">
        <div class="d-flex align-items-center">
          <div class="site-logo mr-auto w-25"><a href="../">ChamFION</a></div>

          <div class="mx-auto text-center">
            <nav class="site-navigation position-relative text-right" role="navigation">
              <ul class="site-menu main-menu js-clone-nav mx-auto d-none d-lg-block  m-0 p-0">
                <li><a href="#home-section" class="nav-link">Home</a></li>
                <li><a href="../search" class="nav-link">Squad Maker</a></li>
                <li><a href="TopPlayer.html" class="nav-link">Top Player</a></li>
                <li><a href="Analysis.html" class="nav-link">Analysis</a></li>
              </ul>
            </nav>
          </div>

          <div class="ml-auto w-25">
            <nav class="site-navigation position-relative text-right" role="navigation">
              <ul class="site-menu main-menu site-menu-dark js-clone-nav mr-auto d-none d-lg-block m-0 p-0">
                <li class="cta"><a href="#contact-section" class="nav-link"><span>Contact Us</span></a></li>
              </ul>
            </nav>
            <a href="#" class="d-inline-block d-lg-none site-menu-toggle js-menu-toggle text-black float-right"><span class="icon-menu h3"></span></a>
          </div>
        </div>
      </div>
      
    </header>

    <div class="intro-section single-cover" id="home-section">
      <div class="slide-1 "  data-stellar-background-ratio="0.5">
        <div class="container">
          <div class="row align-items-center">
          <div class = "col-9">

            <h3 class="text-white">{{name}}</h3>

          </div>
            <div class="col-3">
              <div class="row">
              	<div class="col-10">
              	  <form action="/myapp/search/" method="post" >{% csrf_token %}	
	                    <div class="form-group">
	                      <input type="text" class="form-control" placeholder="닉네임을 입력해 주세요" name="irum">
	                    </div>
	                  </div>
              		<div class="col-2">
	                  <div class="form-group">
	                    <input type="submit" class="btn btn-primary btn-pill" value="검색">
	                    </div>
	                  </div>
                 	</form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="site-section">
      <div class="container" style = "max-width: 1000px; margin-left:150px;" >
        <div class="row">
          <div class="col-lg-8 mb-5">
            <div class="mb-5">
             
              <h3 class="text-black">스쿼드 메이커 </h3> 
						              
						
						    <select id="selectbox" >
						    <option value="">선택</option>
						    <option value="f3412">3412</option>
						    <option value="f343">343</option>
						    <option value="f343_2">343_2</option>
						    <option value="f3142">3142</option>
						    <option value="f3232">3232</option>
						    <option value="f31213">31213</option>
						    <option value="f32212">32212</option>
						    <option value="f433">433</option>
						    <option value="f442">442</option>
						    <option value="f433_2">433_2</option>
						    <option value="f442_2">442_2</option>
						    <option value="f4231">4231</option>
						    <option value="f4123">4123</option>
						    <option value="f4132">4132</option>
						    <option value="f42211">42211</option>
						    <option value="f424">424</option>
						    <option value="f4312">4312</option>
						    <option value="f4411">4411</option>
						    <option value="f4213">4213</option>
						    <option value="f451">451</option>
						    <option value="f4123_2">4123_2</option>
						    <option value="f4222">4222</option>
						    <option value="f41212">41212</option>
						    <option value="f41212_2">41212_2</option>
						    <option value="f4213_2">4213_2</option>
						    <option value="f4141">4141</option>
						    <option value="f4321">4321</option>
						    <option value="f5212">5212</option>
						    <option value="f523">523</option>
						    <option value="f532">532</option>
						    <option value="f541">541</option>
						    </select>
						                           
					
              
					<div>
					<img src='{% static "images/grass.png" %}' width="770" height="750"></img>	
						<div id= "squadformation"></div> 															
					</div>
					
              
            </div> <!--  mb-5 -->

    
            </div>
            
            <div class="col-lg-2">         
              <!--  empty box ( 비율때문에 삽입) -->            
            </div>
            <div class="col-lg-2">
                     
                <h3 class="text-black">선수비교</h3>
                <table id="tablList" border="1"></table>
                
            
            </div> <!-- right block end -->



          </div> <!--  row end -->
  
        </div>
      </div>  
    </div>


        <script>

            $('#selectbox').change( function() {
                $.ajax({
                    url:'/myapp/squadform/',
                    dataType:'json',
                    type:'POST',
                    data:{'msg':$('#selectbox').val()},
                    success:function(result){
                        $('#squadformation').html(result['msg']);
                    }
                });
            })

            function recoplayer(i){
             $(function () {
              //동적으로 원격에 있는 JSON 파일(결과값)을 로드
              $.ajax({
                url: "/myapp/recommend/",
                dataType: "json",
                success: function (data) {
                  //받아온 JSON을 테이블에 출력
                  $('#tablList').html("");
                  $('#tablList').append("<th>IMG</th><th>Season</th><th> Name </th><th>Pay</th><th>OVR</th>");

                  $.each(data, function (index, entry) {
                    $('#tablList').append("<tr onclick=\"takeplayer(\'"+entry["Season"]+"\',\'"+i+"\',\'"+entry["Pnum"]+"\',\'"+entry["Mark"]+"\',\'"+entry["Name"]+"\')\"><td>" + "<img src=\"http://fo4.dn.nexoncdn.co.kr/live/externalAssets/common/players/"+entry["Pnum"]+".png?rd=201910080430\">" + "</td><td>" + "<img src=\"http://s.nx.com/s2/game/fo4/obt/externalAssets/season/"+entry["Season"]+".png\">" + "</td><td>" + entry["Name"] + "</td><td>" + entry["Pay"] + "</td><td>" + entry["OVR"] + "</td></tr>");
                    
                  });
                },
                error: function () { alert("에러발생"); }
              });
            });
            }

            function takeplayer(season,i,Pnum,Mark,Name){
              alert(season+","+i+","+Pnum)
              
              $(function () {
              //동적으로 원격에 있는 JSON 파일(결과값)을 로드
              $.ajax({
                url: "/myapp/takeplayer/",
                dataType: "json",
                success: function (data) {
                  //받아온 JSON을 테이블에 출력
                  $('#formationPlayer'+i).html("");
                  $('#formationPlayer'+i).append("<img src=\"http://s.nx.com/s2/game/fo4/obt/externalAssets/card/"+season+".png\" width=\"120\" height=\"120\" onclick=\"searchplayer(i)\">");
                  $('#formationPlayer'+i).append("<img style=\"position: absolute; top: 15%;left:40%;\" src=\"http://fo4.dn.nexoncdn.co.kr/live/externalAssets/common/players/"+Pnum+".png?rd=201910080430\" width=\"72\" height=\"72\" onclick=\"searchplayer(i)\">");
                  $('#formationPlayer'+i).append("<img style=\"position: absolute; top: 57%;left:10%;\" src=\"http://s.nx.com/s2/game/fo4/obt/externalAssets/season/"+Mark+"_big.png\" width=\"18px\" height=\"18px\" onclick=\"searchplayer(i)\">");
                },
                error: function () { alert("에러발생"); }
              });
            });

            }

            function takeplayer2(name,k){
            var jsonLocation = '/static/images/background.json';

            $.getJSON(jsonLocation, function(data){

              $.each(data, function(I, item){

              console.log(item.seasonId);

              });

            });

            }

            

        </script>




	<!-- .site-wrap -->

  <script src='{% static "js/jquery-3.3.1.min.js" %}'></script>
  <script src='{% static "js/jquery-migrate-3.0.1.min.js" %}'></script>
  <script src='{% static "js/jquery-ui.js" %}'></script>
  <script src='{% static "js/popper.min.js" %}'></script>
  <script src='{% static "js/bootstrap.min.js" %}'></script>
  <script src='{% static "js/owl.carousel.min.js" %}'></script>
  <script src='{% static "js/jquery.stellar.min.js" %}'></script>
  <script src='{% static "js/jquery.countdown.min.js" %}'></script>
  <script src='{% static "js/bootstrap-datepicker.min.js" %}'></script>
  <script src='{% static "js/jquery.easing.1.3.js" %}'></script>
  <script src='{% static "js/aos.js" %}'></script>
  <script src='{% static "js/jquery.fancybox.min.js" %}'></script>
  <script src='{% static "js/jquery.sticky.js" %}'></script>

  
  <script src='{% static "js/main.js" %}'></script>
    
  </body>
</html>